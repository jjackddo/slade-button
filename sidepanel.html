<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Gemini Assistant</title>
    <style>
        body,
        html,
        iframe {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border: none;
            background: #fff;
        }
    </style>
</head>

<body>
    <iframe id="gemini-frame" src="https://gemini.google.com/app" allow="clipboard-read; clipboard-write"></iframe>
    <script>
        // 새로운 액션 발생 시 프레임을 새로고침하여 주입 스크립트를 재실행시킵니다.
        chrome.storage.onChanged.addListener((changes, namespace) => {
            if (namespace === 'local' && changes.lastUpdate) {
                console.log('SidePanel: New action detected, reloading Gemini frame...');
                const frame = document.getElementById('gemini-frame');
                if (frame) {
                    frame.src = "https://gemini.google.com/app?refresh=" + Date.now();
                }
            }
        });
    </script>
</body>

</html>